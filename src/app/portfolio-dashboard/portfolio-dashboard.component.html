<div class="container-fluid mt-4">
  <!-- PnL Summary -->
  <div *ngIf="pnl" class="row mb-4">
    <div class="col-md-4">
      <mat-card class="pnl-card">
        <mat-card-header>
          <mat-card-title>Realized PnL</mat-card-title>
        </mat-card-header>
        <mat-card-content [ngClass]="{'text-success': pnl.totalRealizedPnl >= 0, 'text-danger': pnl.totalRealizedPnl < 0}">
          <h3>{{ pnl.totalRealizedPnl | currency:'INR' }}</h3>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-md-4">
      <mat-card class="pnl-card">
        <mat-card-header>
          <mat-card-title>Unrealized PnL</mat-card-title>
        </mat-card-header>
        <mat-card-content [ngClass]="{'text-success': pnl.totalUnrealizedPnl >= 0, 'text-danger': pnl.totalUnrealizedPnl < 0}">
          <h3>{{ pnl.totalUnrealizedPnl | currency:'INR' }}</h3>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-md-4">
      <mat-card class="pnl-card">
        <mat-card-header>
          <mat-card-title>Overall PnL</mat-card-title>
        </mat-card-header>
        <mat-card-content [ngClass]="{'text-success': pnl.overallPnl >= 0, 'text-danger': pnl.overallPnl < 0}">
          <h3>{{ pnl.overallPnl | currency:'INR' }}</h3>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Holdings -->
  <mat-card class="mb-4">
    <mat-card-header>
      <mat-card-title>Holdings</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="holdings" class="mat-elevation-z8">
        <!-- Symbol Column -->
        <ng-container matColumnDef="tradingsymbol">
          <th mat-header-cell *matHeaderCellDef> Symbol </th>
          <td mat-cell *matCellDef="let holding"> {{ holding.tradingsymbol }} </td>
        </ng-container>

        <!-- Quantity Column -->
        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef> Quantity </th>
          <td mat-cell *matCellDef="let holding"> {{ holding.quantity }} </td>
        </ng-container>

        <!-- Avg. Price Column -->
        <ng-container matColumnDef="average_price">
          <th mat-header-cell *matHeaderCellDef> Avg. Price </th>
          <td mat-cell *matCellDef="let holding"> {{ holding.average_price | currency:'INR' }} </td>
        </ng-container>

        <!-- Last Price Column -->
        <ng-container matColumnDef="last_price">
          <th mat-header-cell *matHeaderCellDef> Last Price </th>
          <td mat-cell *matCellDef="let holding"> {{ holding.last_price | currency:'INR' }} </td>
        </ng-container>

        <!-- PnL Column -->
        <ng-container matColumnDef="pnl">
          <th mat-header-cell *matHeaderCellDef> PnL </th>
          <td mat-cell *matCellDef="let holding" [ngClass]="{'text-success': holding.pnl >= 0, 'text-danger': holding.pnl < 0}"> {{ holding.pnl | currency:'INR' }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['tradingsymbol', 'quantity', 'average_price', 'last_price', 'pnl']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['tradingsymbol', 'quantity', 'average_price', 'last_price', 'pnl'];"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <!-- Positions -->
  <mat-card>
    <mat-card-header>
      <mat-card-title>Positions</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="positions" class="mat-elevation-z8">
        <!-- Symbol Column -->
        <ng-container matColumnDef="tradingsymbol">
          <th mat-header-cell *matHeaderCellDef> Symbol </th>
          <td mat-cell *matCellDef="let position"> {{ position.tradingsymbol }} </td>
        </ng-container>

        <!-- Product Column -->
        <ng-container matColumnDef="product">
          <th mat-header-cell *matHeaderCellDef> Product </th>
          <td mat-cell *matCellDef="let position"> {{ position.product }} </td>
        </ng-container>

        <!-- Quantity Column -->
        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef> Quantity </th>
          <td mat-cell *matCellDef="let position"> {{ position.quantity }} </td>
        </ng-container>

        <!-- Avg. Price Column -->
        <ng-container matColumnDef="average_price">
          <th mat-header-cell *matHeaderCellDef> Avg. Price </th>
          <td mat-cell *matCellDef="let position"> {{ position.average_price | currency:'INR' }} </td>
        </ng-container>

        <!-- Last Price Column -->
        <ng-container matColumnDef="last_price">
          <th mat-header-cell *matHeaderCellDef> Last Price </th>
          <td mat-cell *matCellDef="let position"> {{ position.last_price | currency:'INR' }} </td>
        </ng-container>

        <!-- PnL Column -->
        <ng-container matColumnDef="pnl">
          <th mat-header-cell *matHeaderCellDef> PnL </th>
          <td mat-cell *matCellDef="let position" [ngClass]="{'text-success': position.pnl >= 0, 'text-danger': position.pnl < 0}"> {{ position.pnl | currency:'INR' }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['tradingsymbol', 'product', 'quantity', 'average_price', 'last_price', 'pnl']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['tradingsymbol', 'product', 'quantity', 'average_price', 'last_price', 'pnl'];"></tr>
      </table>
    </mat-card-content>
  </mat-card>
</div>

